<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>文本加解密</title>
</head>
<body>
    <script>
        function stringToBinary(input_string) {
            return Array.from(input_string).map(char => char.charCodeAt(0).toString(2)).join(' ');
        }

        function binaryToString(binary_string) {
            return binary_string.split(' ').map(bin => String.fromCharCode(parseInt(bin, 2))).join('');
        }

        function encryptText(text) {
            const binaryString = stringToBinary(text);
            const zeroWidth1 = '\u2060';
            const zeroWidth0 = '\u200C';
            return binaryString.replace(/1/g, zeroWidth1).replace(/0/g, zeroWidth0);
        }

        function decryptText(text) {
            const zeroWidth1 = '\u2060';
            const zeroWidth0 = '\u200C';
            const binaryString = text.replace(new RegExp(zeroWidth1, 'g'), '1').replace(new RegExp(zeroWidth0, 'g'), '0');
            return binaryToString(binaryString);
        }

        function getQueryParams() {
            const params = new URLSearchParams(window.location.search);
            return {
                text: params.get('text'),
                options: params.get('options')
            };
        }

        function processQueryParams() {
            const { text, options } = getQueryParams();
            let result = '';

            if (text) {
                if (options === '1') {
                    result = encryptText(text);
                } else if (options === '2') {
                    result = decryptText(text);
                } else {
                    result = '无效的选项参数';
                }
            } else {
                result = '未提供文本';
            }

            document.body.textContent = result;
        }

        window.onload = processQueryParams;
    </script>
</body>
</html>
